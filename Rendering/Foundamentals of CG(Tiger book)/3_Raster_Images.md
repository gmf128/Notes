# 3.Raster Images

## 3.1 Raster Devices

### 3.1.1 物理光学：光的极化（偏振）

 什么是偏振光？

光可以看作是由一些微小的波构成的。**这些波可以在任何一个平面上振动。在一个特定的光束中，有些波可以上下振动，有些波左右振动，有些波则对角方向振动。它们的振动方向可能均匀地分布在所有各个方向上**，没有一个振动平面占优势或者在光波中比其他平面占有更大的份额——普通的太阳光或电灯泡的光都是这样。

可是，现在让我们设想光穿过一块透明的晶体。晶体是由排成规整的行列和平面的原子或原子团构成的。因此，**光波会发现，当它的振动平面恰巧能塞进两个原子平面之间时，它就很容易通过这块晶体**。要是它的振动平面与原子的平面成一个角度，它就会撞在原子上，因此，光波就要消耗很多能量方能继续振动下去。这样的光会局部或全部被吸收掉。你可以用下面的办法想到这是一种什么景象：试想象你把一根绳子的一头拴在邻居院子里的树上，另一头拿在你手里。再假定绳子是从篱笆的两根竹子的正当中穿过去的。好了，如果你现在拿绳子上下波动，这些波就会从两根竹子之间通过，并从你的手传到那棵树上。这时，那座篱笆对你的波来说是“透明的”。但是，要是你让绳子左右波动，绳子就会撞在两根竹子上，波就不会通过篱笆了。**有些晶体能够强迫光波把所有能量分成两束分离的光线**。这时振动平面就不再均匀分布了。在其中的一个光束中，所有的波都在一个特定的平面上振动；而在另一个光束中，所有的波都在与第一束光的平面**成直角的平面上振动**：不可能出现任何对角方向的振动。**当光波被迫在某一特定的平面上振动时，我们就说这样的光是“面偏振光”，或简单地称它为“偏振光”**。而朝着所有各个方向振动的普通光都是“非偏振光”。西方国家把偏振光称为“极化光”。

为什么叫做“极化光”呢？当这种现象在1908年第一次定名时，那个发明这个名称的法国工程师马吕斯关于光的本性有一个错误的理论。他认为，光是由一些象磁铁那样有南北极的粒子组成的。他想，那种从晶体中穿过的光，可能是南北极的方向全部相同。这种想法后来被证明是错的，但那个名称却已被人们牢牢地记住，无法再改变了。

当一块晶体产生偏振平面各不相同的两束光时，这两束光具有稍稍不同的性质。它们在通过晶体时所受到的偏折的大小可能不一样。因此，我们可以想法设计出一块晶体，让它把一束光完全反射掉，而只让另一束光全部通过它。在利用某些晶体时只有一束光能通过，是因为另一束光被吸收掉而转化为热。偏振眼镜片（它是在塑料中嵌入许多细小的这类晶体）就是以上述方式吸收掉许多光，由于这种镜片着色，吸收掉的光就更多了。这种镜片就是这样消除眩目的强光的。

当偏振光通过含有某种不对称分子的溶液时，它的振动平面会被扭转一个角度。化学家根据这种扭转的方向和角度的大小，就能够对这种分子的真实结构作出许多推断，特别是对于有机化合物的分子更是如此。正因为这样，偏振光对于化学理论来说，一直是极其重要的。 

 [物理光学-4.光的偏振_Carifee.的博客-CSDN博客_光的偏振原理图解](https://blog.csdn.net/Carifee/article/details/120126870) 

 **某些晶体对不同方向的光振动具有选择吸收的特性，它能吸收某一方向的光振动，而只让与这一方向垂直的光振动通过，晶体的这种特性叫做二向色性，例如，天然的电气石晶体以及液晶就具有二向色性。** 

### 3.1.2 LED/LCD区别；LCD原理

**LED：Light-emitting diode(diode: 二极管)	LCD：Liquid crystal display(液晶显示屏)**

按照背光源的不同，LCD可以分为CCFL显示器和LED显示器两种。

**误区：**

许多用户认为液晶显示器可以分为LED和LCD，这种认识在某种程度上属于被广告误导了。

市面上所说的LED显示屏并不是真正意义上的LED显示屏，准确的说就是LED背光型液晶显示器，液晶面板依然是传统的LCD显示屏，从某种意义上来说，这多少含有欺诈的性质！韩国三星公司就曾被英国广告协会组织判为违反了该国的广告法，原因就在于其“LEDTV”液晶电视有误导消费者之嫌。对于液晶显示器来说，最重要的关键是其液晶面板和背光类型，而市面上的显示器的液晶面板一般采用TFT面板，是一样的，LED和LCD的区别仅仅是它们的背光类型不一样：LED背光和CCFL背光（也就是荧光灯），分别是二极管和冷阴极灯管。

LCD 即 Liquid Crystal Display 的首字母缩写，意为“液态晶体显示器”，即液晶显示器。而 LED 显示器是指液晶显示器（LCD）中的一种，即以 LED（发光二极管）为背光光源的液晶显示器（LCD）。可见，LCD 是包括 LED的。与 LED 显示器相对应的实际上是 CCFL显示器。

**LCD原理：**

![]( https://box.nju.edu.cn/f/ac7e91555655452085ee/?dl=1 )

### 3.1.3 打印机

打印机和LCD等显示设备的区别：打印机是将色彩打印到纸张等媒介上，再通过**光的反射**被人眼看见的。

打印机不存在像素网格。像素大小（分辨率）取决于打印头的大小和打印头每次移动的距离。

打印机的分辨率的描述为**像素密度而非像素多少**。常用单位：ppi (pixel per inch)；dpi(dots per inch)

### 3.1.4 输入设备：数码相机

**相关领域：ISP 图像信号处理**

光传感器只能衡量光的强度，而不能衡量光的颜色。常用的光传感器：CCD（charge-coupled device) [CCD（电荷耦合元件）_百度百科 (baidu.com)](https://baike.baidu.com/item/CCD/362160) 

和CMOS（ complimentary metal–oxide–semiconductor ） [CMOS传感器_百度百科 (baidu.com)](https://baike.baidu.com/item/CMOS传感器?fromModule=lemma_search-box) 

图像在将实际的景物转换为图像数据时， 通常是将传感器分别接收红、 绿、 蓝三个分量的信息， 然后将红、 绿、 蓝三个分量的信息合成彩色图像。 该方案需要三块滤镜， 这样价格昂贵，且不好制造， 因为三块滤镜都必须保证每一个像素点都对齐。 

常用：Bayer Pattern CFA(Color-filtering array) 进行色彩过滤，得到单色光传到传感器感知光强，再根据算法进行色彩合成

Bayer CFA又称GRGB CFA，因为它每个grid由2个green, 1个blue和1个red组成。**绿色多是因为人眼对绿色感知更强**。

![]( https://box.nju.edu.cn/f/9d5e2f9579b2412da793/?dl=1 )

从Bayer恢复颜色：**Demosaic(去马赛克)**算法。常用：插值法（双线性插值，cubic插值）

详细： [ISP图像处理之Demosaic算法及相关 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/170610956) 

​			 [小话Demosaic（一） - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/37512674) 

也有一些相机采用三个独立的array或是同一array内三个独立层来分别衡量RGB值。

## 3.2 图片，像素与几何

### 3.2.1 图片的定义

连续形式的定义：
$$
I(x, y) : R → V,
$$

$$
R\sub {\mathbb{R}}^2,\ V\ denotes\ possible\ color\ set
$$

像素化的图片可以看作对连续形式定义的图片的**采样**

### 3.2.3 像素值

HDR：High dynamic  range 图片：像素色值用浮点数表达

LDR：Low dynamic range图片：像素色值用整数表达

常见表达：用1位表达色值：黑/白文字

8*3: LDR

16*3: 专业相机

32*3 ：HDR

### 3.3.3 显示器的亮度：指数变化

显示器显示颜色时并不是线性变化的，而是成一个指数级的变化

**为什么？**：显示器在显示亮度时应该**看起来**是线性变化的，而不是在能量上线性变化。**这是因为人眼对亮度的感知并不是线性的**。

指标：gamma
$$
a^{\gamma},\ a\in [0,\ 1]
$$
gamma测量方式：
$$
a_0^{\gamma} = 0.5
$$
a_0获取方式：

![]( https://box.nju.edu.cn/f/fb12b5fb323945bc85e4/?dl=1 )

一般， **gamma在1.5~3范围内比较符合人的主观认知**。

### 3.3.4 alpha channel的引入

### 3.3.5 比较几种常见的图片格式：lossless/lossy
